{"ast":null,"code":"var _jsxFileName = \"/home/ethanh/Desktop/1.1.2010s-heardle/src/context/GlobalProvider.js\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GlobalContext = /*#__PURE__*/createContext({});\nexport const GlobalProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const CORRECT_SONG = {\n    name: \"Mask Off\",\n    artist: \"Future\",\n    id: \"xvZqHgFz51I\",\n    offset: 84\n  };\n  const [hasPlayedToday, setHasPlayedToday] = useState(false);\n  const [isCorrect, setIsCorrect] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const EMPTY_SCORES_OBJ = {\n    0: 0,\n    1: 0,\n    2: 0,\n    3: 0,\n    4: 0,\n    5: 0,\n    6: 0\n  };\n  useEffect(() => {\n    const lastStarted = new Date(localStorage.getItem(\"last-started\"));\n    const lastPlayed = new Date(localStorage.getItem(\"last-played\"));\n    if (isToday(lastPlayed)) {\n      setHasPlayedToday(true);\n      resetStoredGuesses();\n      return;\n    }\n    if (!isToday(lastStarted)) {\n      resetStoredGuesses();\n    }\n    localStorage.setItem(\"last-started\", new Date());\n\n    //check if scores in storage - if not, add them\n    localStorage.getItem(\"scores\") == null && localStorage.setItem(\"scores\", JSON.stringify(EMPTY_SCORES_OBJ));\n  }, []);\n  useEffect(() => {\n    console.log(`isplaying: ${isPlaying}`);\n  }, [isPlaying]);\n  const resetStoredGuesses = () => {\n    localStorage.setItem(\"guesses\", JSON.stringify(['', '', '', '', '', '']));\n  };\n  const isToday = someDate => {\n    const today = new Date();\n    return (someDate === null || someDate === void 0 ? void 0 : someDate.getDate()) == today.getDate() && (someDate === null || someDate === void 0 ? void 0 : someDate.getMonth()) == today.getMonth() && (someDate === null || someDate === void 0 ? void 0 : someDate.getFullYear()) == today.getFullYear();\n  };\n  return /*#__PURE__*/_jsxDEV(GlobalContext.Provider, {\n    value: {\n      CORRECT_SONG,\n      hasPlayedToday,\n      setHasPlayedToday,\n      isCorrect,\n      setIsCorrect,\n      isPlaying,\n      setIsPlaying\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n};\n_s(GlobalProvider, \"awJGFL+ysFSRS5w4YmmApNc7Qew=\");\n_c = GlobalProvider;\nexport default GlobalContext;\nvar _c;\n$RefreshReg$(_c, \"GlobalProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","GlobalContext","GlobalProvider","children","CORRECT_SONG","name","artist","id","offset","hasPlayedToday","setHasPlayedToday","isCorrect","setIsCorrect","isPlaying","setIsPlaying","EMPTY_SCORES_OBJ","lastStarted","Date","localStorage","getItem","lastPlayed","isToday","resetStoredGuesses","setItem","JSON","stringify","console","log","someDate","today","getDate","getMonth","getFullYear"],"sources":["/home/ethanh/Desktop/1.1.2010s-heardle/src/context/GlobalProvider.js"],"sourcesContent":["import { createContext,useEffect,useState } from \"react\";\n\nconst GlobalContext = createContext({});\n\nexport const GlobalProvider = ({children}) =>{\n    const CORRECT_SONG = \n    {\n        name: \"Mask Off\",\n        artist:\"Future\",\n        id: \"xvZqHgFz51I\",\n        offset: 84,\n    }\n    const [hasPlayedToday, setHasPlayedToday] = useState(false);\n    const [isCorrect, setIsCorrect] = useState(false);\n    const [isPlaying, setIsPlaying] = useState(false);\n\n    const EMPTY_SCORES_OBJ = \n    {\n        0:0,\n        1:0,\n        2:0,\n        3:0,\n        4:0,\n        5:0,\n        6:0,\n    }\n\n    useEffect(() =>{\n        const lastStarted = new Date(localStorage.getItem(\"last-started\"))\n        const lastPlayed = new Date(localStorage.getItem(\"last-played\"))\n\n        if(isToday(lastPlayed)){\n            setHasPlayedToday(true);\n            resetStoredGuesses();\n            return\n        }\n\n        if(!isToday(lastStarted)){\n            resetStoredGuesses();\n        }\n\n        localStorage.setItem(\"last-started\", new Date())\n        \n        //check if scores in storage - if not, add them\n        localStorage.getItem(\"scores\") == null && localStorage.setItem(\"scores\", JSON.stringify(EMPTY_SCORES_OBJ))\n\n    },[])\n\n    useEffect(()=>{\n        console.log(`isplaying: ${isPlaying}`)\n    },[isPlaying])\n\n    const resetStoredGuesses = () =>{\n        localStorage.setItem(\"guesses\", JSON.stringify(['','','','','','']))\n    }\n\n    const isToday = (someDate) => {\n        const today = new Date()\n        return someDate?.getDate() == today.getDate() &&\n          someDate?.getMonth() == today.getMonth() &&\n          someDate?.getFullYear() == today.getFullYear()\n      }\n\n    return(\n        <GlobalContext.Provider value={{CORRECT_SONG,hasPlayedToday,setHasPlayedToday,isCorrect,setIsCorrect,isPlaying,setIsPlaying}}>\n            {children}\n        </GlobalContext.Provider>\n    )\n}\n\nexport default GlobalContext;"],"mappings":"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"},"metadata":{},"sourceType":"module"}